# Сервис синхронизации с Яндекс.Диском

## Описание

Этот сервис автоматически синхронизирует содержимое локальной папки с указанной папкой 
на Яндекс.Диске через REST API. 

Особенности:
- Загрузка новых и изменённых файлов из локальной папки в облако;
- Удаление файлов из облака, если они удалены локально;
- Логирование всех операций и ошибок в лог-файл;
- Регулярный автоматический запуск с настраиваемым интервалом;
- Кастомная обработка исключений для удобства диагностики.

---

## Требования

- Python 3.10+
- pip
- Доступ к интернету
- OAuth токен Яндекс.Диска с правами на операции чтения/записи

---

## Установка

1. Клонируйте репозиторий:

git clone https://github.com/romanytsch/file_synchronization.git

2. Создайте и активируйте виртуальное окружение (рекомендуется):

python -m venv venv
source venv/bin/activate # Linux/macOS
venv\Scripts\activate # Windows

3. Установите зависимости:

pip install -r requirements.txt

4. Создайте файл `.env` в корне проекта и укажите переменные:

TOKEN=ваш_oauth_token
YANDEX_DISK_PATH=/путь/на/диске
LOCAL_FOLDER=/путь/к/локальной/папке
LOG_PATH=sync.log
SYNC_PERIOD=3600

---

## Конфигурация

| Переменная        | Описание                                      | Пример               |
|-------------------|-----------------------------------------------|----------------------|
| TOKEN             | OAuth токен Яндекс.Диска                      | `ABCD...XYZ`         |
| YANDEX_DISK_PATH  | Путь в облаке для синхронизации               | `/sync_folder`       |
| LOCAL_FOLDER      | Абсолютный путь к локальной папке             | `/home/user/sync`    |
| LOG_PATH          | Путь до файла логов                           | `sync.log`           |
| SYNC_PERIOD       | Интервал между синхронизациями (в секундах)   | `3600` (1 час)       |

---

## Запуск

Запустите сервис командой:

python main.py

Программа будет работать в цикле с паузой `SYNC_PERIOD`, синхронизируя файлы.

---

## Пример вывода логов (`sync.log`)

2025-10-05 15:00:00.123 INFO Программа запущена в 2025-10-05 15:00:00, синхронизируемая папка: /home/user/sync
2025-10-05 15:00:05.234 INFO Удалённые файлы: ['file1.txt', 'file2.jpg']
2025-10-05 15:01:00.345 INFO Локальные файлы: ['file1.txt', 'file3.doc']
2025-10-05 15:02:00.456 INFO Файл file3.doc загружен или обновлён
2025-10-05 15:03:00.567 INFO Файл file2.jpg удалён из облака
2025-10-05 15:10:00.678 INFO Синхронизация завершена

---

## Структура проекта

project_root/
├── main.py                 # Главный скрипт с логикой синхронизации
├── storage_algorithm.py    # Класс для работы с API Яндекс.Диска
├── errors.py               # Кастомные исключения
├── config.py               # Настройки проекта (опционально)
├── requirements.txt        # Список зависимостей
├── .env                    # Конфигурация окружения
└── sync.log                # Файл логов

---

## Поддержка

Для вопросов по установке, настройке или контейнеризации обращайтесь в issues проекта.

---

Спасибо за использование сервиса!